import{a as Sa,b as Ga}from"../chunks/DVnhIDpz.js";import{H as Ba,a as Ra,g as Ha}from"../chunks/C6ZCBc7c.js";import"../chunks/DsnmJJEf.js";import{i as oa,aR as pa,J as Ge,a8 as Ja,aS as Ua,o as Qa,aT as $a,aU as es,W as ts,H as as,w as qa,a9 as Ia,aV as ss,aW as ls,ah as g,g as r,aD as rs,ag as tt,aX as Fe,p as he,at as Zt,a as Se,b as C,c as ke,f as T,d as s,r as t,t as te,s as a,as as K,au as ge,e as w,aw as we,u as ya,aY as Wt,aZ as la,av as Na,a_ as ka,a$ as ja,b0 as ns}from"../chunks/CziT1XCT.js";import{s as V,e as ze,A as ga,B as se,C as ca,D as os,F as cs,G as ds,H as is,I as xa,P as ra,J as za,K as na,L as $e,M as vs,N as us,O as fs,Q as ms,R as ma,T as _s,U as Aa,r as bs,f as _t,t as _a,V as ne,W as hs,X as Ca,Y as ks,Z as gs,_ as ps,$ as ys}from"../chunks/BNv7zf0y.js";import{p as Ne,i as et,b as da}from"../chunks/RgFtBYQ_.js";import{s as xs}from"../chunks/qGOfSBod.js";import{p as Oa}from"../chunks/BzA_OVsJ.js";import{a as Ds,o as ws}from"../chunks/fCVZ51zT.js";import{i as Ls}from"../chunks/C2Rxz0g2.js";function Xa(l){var e,o,n="";if(typeof l=="string"||typeof l=="number")n+=l;else if(typeof l=="object")if(Array.isArray(l)){var i=l.length;for(e=0;e<i;e++)l[e]&&(o=Xa(l[e]))&&(n&&(n+=" "),n+=o)}else for(o in l)l[o]&&(n&&(n+=" "),n+=o);return n}function Ss(){for(var l,e,o=0,n="",i=arguments.length;o<i;o++)(l=arguments[o])&&(e=Xa(l))&&(n&&(n+=" "),n+=e);return n}function Pa(l){return typeof l=="object"?Ss(l):l??""}const Fa=[...` 	
\r\fÂ \v\uFEFF`];function Ns(l,e,o){var n=l==null?"":""+l;if(e&&(n=n?n+" "+e:e),o){for(var i in o)if(o[i])n=n?n+" "+i:i;else if(n.length)for(var c=i.length,v=0;(v=n.indexOf(i,v))>=0;){var d=v+c;(v===0||Fa.includes(n[v-1]))&&(d===n.length||Fa.includes(n[d]))?n=(v===0?"":n.substring(0,v))+n.substring(d+1):v=d}}return n===""?null:n}function pe(l,e,o,n,i,c){var v=l.__className;if(oa||v!==o||v===void 0){var d=Ns(o,n,c);(!oa||d!==l.getAttribute("class"))&&(d==null?l.removeAttribute("class"):l.className=d),l.__className=o}else if(c&&i!==c)for(var u in c){var p=!!c[u];(i==null||p!==!!i[u])&&l.classList.toggle(u,p)}return c}function Wa(l,e,o=!1){if(l.multiple){if(e==null)return;if(!Qa(e))return $a();for(var n of l.options)n.selected=e.includes(Vt(n));return}for(n of l.options){var i=Vt(n);if(es(i,e)){n.selected=!0;return}}(!o||e!==void 0)&&(l.selectedIndex=-1)}function js(l){var e=new MutationObserver(()=>{Wa(l,l.__value)});e.observe(l,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ts(()=>{e.disconnect()})}function Ma(l,e,o=e){var n=new WeakSet,i=!0;pa(l,"change",c=>{var v=c?"[selected]":":checked",d;if(l.multiple)d=[].map.call(l.querySelectorAll(v),Vt);else{var u=l.querySelector(v)??l.querySelector("option:not([disabled])");d=u&&Vt(u)}o(d),Ge!==null&&n.add(Ge)}),Ja(()=>{var c=e();if(l===document.activeElement){var v=Ua??Ge;if(n.has(v))return}if(Wa(l,c,i),i&&c===void 0){var d=l.querySelector(":checked");d!==null&&(c=Vt(d),o(c))}l.__value=c,i=!1}),js(l)}function Vt(l){return"__value"in l?l.__value:l.value}function bt(l,e,o=e){var n=new WeakSet;pa(l,"input",async i=>{var c=i?l.defaultValue:l.value;if(c=ba(l)?ha(c):c,o(c),Ge!==null&&n.add(Ge),await as(),c!==(c=e())){var v=l.selectionStart,d=l.selectionEnd,u=l.value.length;if(l.value=c??"",d!==null){var p=l.value.length;v===d&&d===u&&p>u?(l.selectionStart=p,l.selectionEnd=p):(l.selectionStart=v,l.selectionEnd=Math.min(d,p))}}}),(oa&&l.defaultValue!==l.value||qa(e)==null&&l.value)&&(o(ba(l)?ha(l.value):l.value),Ge!==null&&n.add(Ge)),Ia(()=>{var i=e();if(l===document.activeElement){var c=Ua??Ge;if(n.has(c))return}ba(l)&&i===ha(l.value)||l.type==="date"&&!i&&!l.value||i!==l.value&&(l.value=i??"")})}function Le(l,e,o=e){pa(l,"change",n=>{var i=n?l.defaultChecked:l.checked;o(i)}),(oa&&l.defaultChecked!==l.checked||qa(e)==null)&&o(l.checked),Ia(()=>{var n=e();l.checked=!!n})}function ba(l){var e=l.type;return e==="number"||e==="range"}function ha(l){return l===""?null:+l}function zs(l,e){ss(window,["resize"],()=>ls(()=>e(window[l])))}function As(l){var e=rs(0);return function(){return arguments.length===1?(g(e,r(e)+1),arguments[0]):(r(e),l())}}function Cs(l,e){throw new Ba(l,e)}function Os({params:l}){const e=l.design;if(Object.keys(Sa).includes(e))return{pageDef:Sa[e],allLink:Ga};Cs(404,"Design undefined!")}const Xl=Object.freeze(Object.defineProperty({__proto__:null,load:Os},Symbol.toStringTag,{value:"Module"})),H=tt({});function Ya(l,e,o){if(Object.keys(H).includes(l)){const i=H[l],c=Object.keys(i);for(const v of Object.keys(e))c.includes(v)?o&&(i[v]=e[v]):i[v]=e[v];H[l]=i}else H[l]=e}function Ps(l){const e=l.pDef.partName,o={};for(const n of l.pDef.params)o[n.name]=n.init;Ya(e,o,!1)}var Fs=T('<aside class="backdrop svelte-1gj654j"><div class="dialog svelte-1gj654j"><button class="svelte-1gj654j"><img/></button></div></aside>');function Va(l,e){he(e,!0);let o=Ne(e,"modalOpen",15);function n(){o(!1)}var i=Zt(),c=Se(i);{var v=d=>{var u=Fs(),p=s(u),m=s(p);m.__click=n;var S=s(m);t(m),t(p),t(u),te(()=>{V(S,"src",e.svgPath),V(S,"alt",e.svgPath)}),C(d,u)};et(c,d=>{o()&&d(v)})}C(l,i),ke()}Fe(["click"]);var Ms=T('<button class="svelte-10autut"><img class="svelte-10autut"/></button>'),Ts=T('<section class="svelte-10autut"><!> <!></section>');function Rs(l,e){he(e,!0);function o(m){const S=[];for(const z of Object.values(m.paramSvg))S.includes(z)||S.push(z);return S}let n=K(!1),i=K(""),c=ge(()=>o(e.pDef).map(m=>ga(`/pgdsvg/${m}`)));function v(m){g(i,m,!0),g(n,!0)}var d=Ts(),u=s(d);Va(u,{get svgPath(){return r(i)},get modalOpen(){return r(n)},set modalOpen(m){g(n,m,!0)}});var p=a(u,2);ze(p,16,()=>r(c),m=>m,(m,S)=>{var z=Ms();z.__click=()=>v(S);var y=s(z);t(z),te(()=>{V(y,"src",S),V(y,"alt",S)}),C(m,z)}),t(d),C(l,d),ke()}Fe(["click"]);var Us=T('<aside class="backdrop svelte-zax8dh"><div><article class="question svelte-zax8dh"><!></article> <footer class="svelte-zax8dh"><button class="cancel svelte-zax8dh">Cancel</button> <button class="ok svelte-zax8dh"> </button></footer></div></aside>');function Yt(l,e){he(e,!0);let o=Ne(e,"okName",3,"Ok"),n=Ne(e,"modalOpen",15),i=Ne(e,"sizeLarge",3,!1);function c(){n(!1)}function v(){e.okFunc(),n(!1)}var d=Zt(),u=Se(d);{var p=m=>{var S=Us(),z=s(S);let y;var f=s(z),q=s(f);xs(q,()=>e.children),t(f);var R=a(f,2),Z=s(R);Z.__click=c;var A=a(Z,2);A.__click=v;var Q=s(A,!0);t(A),t(R),t(z),t(S),te(()=>{y=pe(z,1,"dialog svelte-zax8dh",null,y,{sizeLarge:i()}),w(Q,o())}),C(m,S)};et(u,m=>{n()&&m(p)})}C(l,d),ke()}Fe(["click"]);var qs=T('<p class="diagItem svelte-1mnw8un"> </p>'),Is=T('<p class="diagTitle svelte-1mnw8un">Do you really want to delete the following localStorage keys?</p> <!>',1),Xs=T('<tr class="svelte-1mnw8un"><td><input type="checkbox"/></td><td class="svelte-1mnw8un"><button class="svelte-1mnw8un"> </button></td><td> </td></tr>'),Ws=T('<div class="deleteKeys svelte-1mnw8un"><button class="svelte-1mnw8un">Delete</button> <!> <table class="svelte-1mnw8un"><thead class="svelte-1mnw8un"><tr><td>Delete</td><td>Key name</td><td>Last modification</td></tr><tr><td><input type="checkbox"/></td><td class="instruction">delete all</td><td></td></tr></thead><tbody class="svelte-1mnw8un"></tbody></table></div>');function Za(l,e){he(e,!0);let o=Ne(e,"storeName",15),n=Ne(e,"localKeys",15),i=K(tt({})),c=K(!1),v=K(!1);function d(){let _=[];const U=new RegExp(`^${e.pageName}_`);return _=Object.keys(window.localStorage).filter(Y=>U.test(Y)).map(Y=>Y.replace(U,"")),_.sort(),_}n(d());function u(_){o(_)}function p(_){let U={};for(const E of _){let Y="";const $=`${e.pageName}_${E}`,J=window.localStorage.getItem($);J!==null&&(Y=JSON.parse(J).lastModif),U[E]=Y}return U}let m=ge(()=>p(n()));function S(_){let U={};for(const E of _)U[E]=!1;return U}g(i,S(n()),!0);function z(){for(const _ of n())r(i)[_]=r(c)}function y(){for(const _ of n())if(r(i)[_]){const U=`${e.pageName}_${_}`;window.localStorage.removeItem(U)}g(c,!1),n(d())}var f=Ws(),q=s(f);q.__click=()=>{g(v,!0)};var R=a(q,2);Yt(R,{okName:"Confirm",okFunc:y,get modalOpen(){return r(v)},set modalOpen(_){g(v,_,!0)},children:(_,U)=>{var E=Is(),Y=a(Se(E),2);ze(Y,16,n,$=>$,($,J)=>{var de=Zt(),ae=Se(de);{var G=fe=>{var re=qs(),ie=s(re,!0);t(re),te(()=>w(ie,J)),C(fe,re)};et(ae,fe=>{r(i)[J]&&fe(G)})}C($,de)}),C(_,E)},$$slots:{default:!0}});var Z=a(R,2),A=s(Z),Q=a(s(A)),le=s(Q),oe=s(le);se(oe),oe.__change=z,t(le),we(2),t(Q),t(A);var ce=a(A);ze(ce,20,n,_=>_,(_,U)=>{var E=Xs(),Y=s(E),$=s(Y);se($),t(Y);var J=a(Y),de=s(J);de.__click=()=>u(U);var ae=s(de,!0);t(de),t(J);var G=a(J),fe=s(G,!0);t(G),t(E),te(()=>{w(ae,U),w(fe,r(m)[U])}),Le($,()=>r(i)[U],re=>r(i)[U]=re),C(_,E)}),t(ce),t(Z),t(f),Le(oe,()=>r(c),_=>g(c,_)),C(l,f),ke()}Fe(["click","change"]);var Ys=T('<p class="warnMsg svelte-1p7caiu"> </p>'),Vs=T('<!> <div class="svelte-1p7caiu"><label for="storName" class="svelte-1p7caiu">Give a name to your parameter-set:</label> <input type="text" id="storName" required minlength="4" maxlength="30" size="32" class="svelte-1p7caiu"/> <!></div>',1);function Zs(l,e){he(e,!0);let o=Ne(e,"storeName",15),n=K(tt([]));function i(z){const y=/[-:]/g,f=/\..*$/,q=new Date().toISOString().replace(y,"").replace(f,"").replace("T","_");return`${z}_${q}`}o(i(e.pageName));let c=ge(()=>r(n).includes(o()));var v=Vs(),d=Se(v);Za(d,{get pageName(){return e.pageName},get storeName(){return o()},set storeName(z){o(z)},get localKeys(){return r(n)},set localKeys(z){g(n,z,!0)}});var u=a(d,2),p=a(s(u),2);se(p);var m=a(p,2);{var S=z=>{var y=Ys(),f=s(y);t(y),te(()=>w(f,`Warning: name ${o()??""} already used`)),C(z,y)};et(m,z=>{r(c)&&z(S)})}t(u),bt(p,o),C(l,v),ke()}var Es=T('<!> <div class="svelte-mfuusf"><label for="storName" class="svelte-mfuusf">Select a parameter-set:</label> <input type="text" id="storName" readonly="" minlength="4" maxlength="30" size="32" class="svelte-mfuusf"/></div>',1);function Ks(l,e){he(e,!0);let o=Ne(e,"storeName",15),n=K(tt([]));function i(p){let m=o();return!p.includes(m)&&(p.length>0?m=p[0]:m=""),m}ya(()=>{o(i(r(n)))});var c=Es(),v=Se(c);Za(v,{get pageName(){return e.pageName},get storeName(){return o()},set storeName(p){o(p)},get localKeys(){return r(n)},set localKeys(p){g(n,p,!0)}});var d=a(v,2),u=a(s(d),2);se(u),t(d),te(()=>ca(u,o())),C(l,c),ke()}const D=tt({dLayers:cs(),zAdjust:os(),canvasZWidth:0});var Gs=T('<canvas class="mini svelte-1b8e2jn"></canvas>');function Ta(l,e){he(e,!0);const o=200,n=.6;let i;function c(u,p,m,S){const z=ds(S);z.ruler=!1;let y;if(i){const f=i.getContext("2d");f.clearRect(0,0,f.canvas.width,f.canvas.height);const q=f.canvas.width;try{e.full?y=u.getAdjustFull(f.canvas.width,f.canvas.height):y=is(m,q,p),u.draw(f,y,z)}catch(R){console.log(R)}}}ya(()=>{c(e.pFig,D.zAdjust,D.canvasZWidth,D.dLayers)});function v(u){const p=u.offsetX,m=u.offsetY,S=i.getContext("2d"),z=S.canvas.width/2,y=S.canvas.height/2;if(u.button===0){let f=1;p>z&&(f+=1*n),m>y&&(f+=2*n),S.canvas.width=f*o,S.canvas.height=f*o,c(e.pFig,D.zAdjust,D.canvasZWidth,D.dLayers)}}var d=Gs();V(d,"width",o),V(d,"height",o),d.__click=v,da(d,u=>i=u,()=>i),C(l,d),ke()}Fe(["click"]);function Bs(l,e){const o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),o.setAttribute("download",l),o.click(),o.remove()}function Hs(l,e,o){const n=/[-:]/g,i=/\..*$/,c=new Date().toISOString().replace(n,"").replace(i,"").replace("T","_");return xa(c,l,e,o)}function Da(l,e,o){const n=/[-:]/g,i=/\..*$/,c=new Date().toISOString().replace(n,"").replace(i,"").replace("T","_"),v=`px_${l}_${c}.json`,d=xa(c,l,e,o);Bs(v,d)}function Js(l,e,o){const n=new URL(l),i=2e3;let c=n.toString().length;for(const v of Object.keys(e)){const d=e[v].toString(),u=2+v.length+d.length;n.searchParams.append(encodeURIComponent(v),encodeURIComponent(d)),c+=u}return c>=i&&console.log(`warn547: generateUrl: strLength ${c} larger than strLengthLimit ${i}`),n.toString()}const Qs=Symbol();class $s extends URLSearchParams{#e=K(0);#s=tl();#t=!1;#a(){if(!this.#s||this.#t)return;this.#t=!0;const e=this.toString();this.#s.search=e&&`?${e}`,this.#t=!1}[Qs](e){if(!this.#t){this.#t=!0;for(const o of[...super.keys()])super.delete(o);for(const[o,n]of e)super.append(o,n);Wt(this.#e),this.#t=!1}}append(e,o){super.append(e,o),this.#a(),Wt(this.#e)}delete(e,o){var n=super.has(e,o);super.delete(e,o),n&&(this.#a(),Wt(this.#e))}get(e){return r(this.#e),super.get(e)}getAll(e){return r(this.#e),super.getAll(e)}has(e,o){return r(this.#e),super.has(e,o)}keys(){return r(this.#e),super.keys()}set(e,o){var n=super.getAll(e).join("");super.set(e,o),n!==super.getAll(e).join("")&&(this.#a(),Wt(this.#e))}sort(){super.sort(),this.#a(),Wt(this.#e)}toString(){return r(this.#e),super.toString()}values(){return r(this.#e),super.values()}entries(){return r(this.#e),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return r(this.#e),super.size}}let el=null;function tl(){return el}var al=T('<input type="number" class="input-number svelte-l78rn1"/> <input type="range" class="svelte-l78rn1"/>',1),sl=T("<option> </option>"),ll=T("<select></select>"),rl=T("<option> </option>"),nl=T("<select></select>"),ol=T('<tr><td class="svelte-l78rn1"> </td><td class="svelte-l78rn1"><button class="svelte-l78rn1"> </button></td><td class="svelte-l78rn1"><!></td><td> </td><td> </td><td class="svelte-l78rn1"> </td><td class="svelte-l78rn1"> </td><td> </td></tr>'),cl=T('<tbody class="svelte-l78rn1"><tr class="separator svelte-l78rn1"><td class="svelte-l78rn1"> </td><td class="svelte-l78rn1"> </td><td class="svelte-l78rn1"><label class="svelte-l78rn1"><input type="checkbox" class="svelte-l78rn1"/> <span class="svelte-l78rn1"></span></label></td></tr></tbody> <tbody></tbody>',1),dl=T('<p>Copy this URL and send it to your friends!</p> <p class="cUrl svelte-l78rn1"> </p>',1),il=T('<section class="svelte-l78rn1"><h2 class="svelte-l78rn1">Parameters</h2> <main class="svelte-l78rn1"><label for="loadFParams" class="fileUpload svelte-l78rn1">Load Params from File</label> <input id="loadFParams" type="file" accept="text/plain, application/json" class="svelte-l78rn1"/> <button class="svelte-l78rn1">Set Params Default</button> <button class="svelte-l78rn1">Load Params from localStorage</button> <!> <!> <textarea rows="3" cols="80" readonly="" wrap="soft"></textarea> <table class="svelte-l78rn1"><thead class="svelte-l78rn1"><tr class="svelte-l78rn1"><td class="svelte-l78rn1">&#35;</td><td class="svelte-l78rn1">Parameter name</td><td class="svelte-l78rn1">Value<span class="svelte-l78rn1"><button class="svelte-l78rn1">&minus;</button><button class="svelte-l78rn1">+</button></span></td><td>Unit</td><td>Default</td><td class="svelte-l78rn1">Min</td><td class="svelte-l78rn1">Max</td><td>Step</td></tr></thead><!></table> <div class="comment svelte-l78rn1"><label for="inComment">Comment:</label> <input type="text" id="inComment" maxlength="150"/></div> <button class="svelte-l78rn1">Save Parameters to File</button> <button class="svelte-l78rn1">Save Parameters as URL</button> <button class="svelte-l78rn1">Save Parameters to localStorage</button> <!> <!></main> <!> <button class="side-img svelte-l78rn1"><img class="svelte-l78rn1"/></button> <div class="mini-canvas svelte-l78rn1"><!></div> <div class="mini-canvas svelte-l78rn1"><!></div></section>');function vl(l,e){he(e,!0);let o=K(""),n=K(!1),i=K(""),c=K(!1),v=K(!1),d=K(!1),u=K(!1),p=K(!1),m=K(""),S=K(""),z=K("");const y=e.pDef;let f=K(tt(ae(y.params[0].name))),q=K(!1),R=K(tt(ie(re(y.params))));Ra(()=>{g(f,ae(e.pDef.params[0].name),!0),g(R,ie(re(e.pDef.params)),!0)});function Z(h,k){let j="",M=!1;h!==e.pDef.partName&&(j+=`warn361: read partName: '${h}'  expected partName: '${e.pDef.partName}'
`,M=!0);let ee=0,ve=0,je=0;const dt=[];for(const me of e.pDef.params)dt.push(me.name),Object.hasOwn(k,me.name)?(ee+=1,H[e.pDef.partName][me.name]===k[me.name]?je+=1:H[e.pDef.partName][me.name]=k[me.name]):ve+=1;let xe=0;for(const me of Object.keys(k))dt.includes(me)||(xe+=1,j+=`warn363: parameter ${me} not in the scope of the design (${xe})
`);const Nt=xe>0,Ve=new Date().toLocaleTimeString();return j+=`Params loaded at ${Ve} :`,j+=` def-nb: ${Object.keys(e.pDef.params).length}`,j+=`, cover-nb: ${ee}, uncover-nb: ${ve}
`,j+=` load-nb: ${Object.keys(k).length}`,j+=`, equal-nb: ${je}, changed-nb: ${ee-je}`,j+=`, out-of-scope: ${xe}`,[j,M||Nt]}async function A(h){try{const k=await fetch(h);if(!k.ok)throw`err627: error while fetching ${h}`;const j=await k.text(),[M]=za(j);(ee=>{var ve=la(ee,2);g(i,ve[0],!0),g(c,ve[1],!0)})(Z(M.partName,M.pVal)),g(o,M.comment,!0)}catch(k){let j=`err223: error by fetching px file
`;j+=k,g(i,j,!0),g(c,!0)}}async function Q(){{const h=new $s(Oa.url.search),k="pxUrl";if(h.has(k)){const M=h.get(k);h.delete(k),M?await A(M):(g(i,`err123: error by parsing URL-search-params
`),g(c,!0))}const j={};for(const[M,ee]of h){const ve=Number(ee);isNaN(ve)||(j[M]=ve)}Object.keys(j).length>0&&(M=>{var ee=la(M,2);g(i,ee[0],!0),g(c,ee[1],!0)})(Z(e.pDef.partName,j))}}Q();function le(h){try{const[k]=za(h);(j=>{var M=la(j,2);g(i,M[0],!0),g(c,M[1],!0)})(Z(k.partName,k.pVal)),g(o,k.comment,!0)}catch(k){let j=`err723: error by parsing parameter file
`;j+=k,g(i,j,!0),g(c,!0)}}async function oe(h){const k=await h.text();le(k)}function ce(h){if(h.target){const k=h.target.files;k&&oe(k[0])}}function _(){Da(e.pDef.partName,H[e.pDef.partName],r(o))}function U(){const h={};for(const k of e.pDef.params)h[k.name]=k.init;(k=>{var j=la(k,2);g(i,j[0],!0),g(c,j[1],!0)})(Z(e.pDef.partName,h))}function E(){if(r(m)!==void 0&&r(m)!==""){const h=`${e.pDef.partName}_${r(m)}`;{const k=window.localStorage.getItem(h);k===null?(g(i,`Warn157: localStorage key ${h} is null`),g(c,!0)):le(k)}}else g(i,"Warn239: No valid name for loading from localStorage!"),g(c,!0)}function Y(){if(r(S)!==void 0&&r(S)!==""){const h=`${e.pDef.partName}_${r(S)}`,k=/\..*$/,j=new Date().toISOString().replace(k,""),M=xa(j,e.pDef.partName,H[e.pDef.partName],r(o));window.localStorage.setItem(h,M)}else console.log("Warn639: No valid name for writing to localStorage!")}function $(){return Js(Oa.url.href,H[e.pDef.partName]).toString()}function J(){g(z,$(),!0),g(u,!0)}function de(){}function ae(h){let k=ga("/pgdsvg/default_param_blank.svg");return Object.keys(e.pDef.paramSvg).includes(h)&&(k=ga(`/pgdsvg/${e.pDef.paramSvg[h]}`)),k}function G(h){g(f,ae(h),!0)}function fe(){g(q,!0)}function re(h){const k=[];let M={sectionName:"main",sectionID:"g0main",sectionVisCollapse:!1,params:[]},ee=0;for(const ve of h)ve.pType===ra.eSectionSeparator?(k.push(M),ee+=1,M={sectionName:ve.name,sectionID:`g${ee}${ve.name}`,sectionVisCollapse:!0,params:[]}):M.params.push(ve);return k.push(M),k}function ie(h){const k={};for(const j of h)k[j.sectionID]=j.sectionVisCollapse;return k}let Me=ge(()=>re(e.pDef.params));function b(){g(n,!0)}function N(){g(n,!1)}let O=ge(()=>r(n)?2:4),X=ge(()=>r(n)?2:3),Ae=ge(()=>r(n)?50:70);var ye=il(),Te=a(s(ye),2),qe=a(s(Te),2);qe.__change=ce;var Ie=a(qe,2);Ie.__click=()=>{g(v,!0)};var Re=a(Ie,2);Re.__click=()=>{g(d,!0)};var Ce=a(Re,2);Yt(Ce,{okName:"Overwrite Parameters",okFunc:U,get modalOpen(){return r(v)},set modalOpen(h){g(v,h,!0)},children:(h,k)=>{we();var j=Na("Load the default parameters ?");C(h,j)},$$slots:{default:!0}});var at=a(Ce,2);Yt(at,{okName:"Load Parameters",okFunc:E,get modalOpen(){return r(d)},set modalOpen(h){g(d,h,!0)},children:(h,k)=>{Ks(h,{get pageName(){return e.pDef.partName},get storeName(){return r(m)},set storeName(j){g(m,j,!0)}})},$$slots:{default:!0}});var We=a(at,2);ka(We);let Et;var st=a(We,2),ht=s(st),kt=s(ht),Be=a(s(kt),2),lt=a(s(Be)),Kt=s(lt);Kt.__click=b;var gt=a(Kt);gt.__click=N,t(lt),t(Be);var Gt=a(Be);let rt;var Bt=a(Gt);let pt;var ia=a(Bt,3);let yt;t(kt),t(ht);var xt=a(ht);ze(xt,19,()=>r(Me),h=>h.sectionName,(h,k,j)=>{var M=cl(),ee=Se(M),ve=s(ee),je=s(ve),dt=s(je,!0);t(je);var xe=a(je),Nt=s(xe,!0);t(xe);var Ve=a(xe),jt=s(Ve),me=s(jt);se(me),we(2),t(jt),t(Ve),t(ve),t(ee);var Je=a(ee,2);let ta;ze(Je,23,()=>r(k).params,Xe=>Xe.name,(Xe,W,zt)=>{var it=ol();let At;var Ct=s(it),Ot=s(Ct);t(Ct);var Qe=a(Ct),Pt=s(Qe);Pt.__click=()=>G(r(W).name);var Ft=s(Pt,!0);t(Pt),t(Qe);var Mt=a(Qe),Tt=s(Mt);{var va=P=>{var F=al(),L=Se(F);se(L);var B=a(L,2);se(B),te(()=>{V(L,"min",r(W).min),V(L,"max",r(W).max),V(L,"step",r(W).step),V(B,"min",r(W).min),V(B,"max",r(W).max),V(B,"step",r(W).step)}),bt(L,()=>H[e.pDef.partName][r(W).name],Oe=>H[e.pDef.partName][r(W).name]=Oe),bt(B,()=>H[e.pDef.partName][r(W).name],Oe=>H[e.pDef.partName][r(W).name]=Oe),C(P,F)},aa=P=>{var F=Zt(),L=Se(F);{var B=_e=>{var De=ll();ze(De,22,()=>["Off","On"],ue=>ue,(ue,Pe,Ue)=>{var be=sl(),Ee=s(be,!0);t(be);var Ke={};te(()=>{w(Ee,Pe),Ke!==(Ke=r(Ue))&&(be.value=(be.__value=r(Ue))??"")}),C(ue,be)}),t(De),Ma(De,()=>H[e.pDef.partName][r(W).name],ue=>H[e.pDef.partName][r(W).name]=ue),C(_e,De)},Oe=_e=>{var De=Zt(),ue=Se(De);{var Pe=be=>{var Ee=nl();ze(Ee,22,()=>r(W).dropdown,Ke=>Ke,(Ke,Ea,wa)=>{var Xt=rl(),Ka=s(Xt,!0);t(Xt);var La={};te(()=>{w(Ka,Ea),La!==(La=r(wa))&&(Xt.value=(Xt.__value=r(wa))??"")}),C(Ke,Xt)}),t(Ee),Ma(Ee,()=>H[e.pDef.partName][r(W).name],Ke=>H[e.pDef.partName][r(W).name]=Ke),C(be,Ee)},Ue=be=>{var Ee=Na("unknown");C(be,Ee)};et(ue,be=>{r(W).pType===ra.eDropdown?be(Pe):be(Ue,!1)},!0)}C(_e,De)};et(L,_e=>{r(W).pType===ra.eCheckbox?_e(B):_e(Oe,!1)},!0)}C(P,F)};et(Tt,P=>{r(W).pType===ra.eNumber?P(va):P(aa,!1)})}t(Mt);var vt=a(Mt);let Rt;var Ut=s(vt,!0);t(vt);var ut=a(vt);let ft;var ua=s(ut,!0);t(ut);var mt=a(ut),fa=s(mt,!0);t(mt);var Ze=a(mt),qt=s(Ze,!0);t(Ze);var It=a(Ze);let sa;var x=s(It,!0);t(It),t(it),te(()=>{At=pe(it,1,"svelte-l78rn1",null,At,{changed:H[e.pDef.partName][r(W).name]!==r(W).init}),w(Ot,`${r(j)+1}.${r(zt)+1}`),w(Ft,r(W).name),Rt=pe(vt,1,"svelte-l78rn1",null,Rt,{hideColumn:r(n)}),w(Ut,r(W).unit),ft=pe(ut,1,"svelte-l78rn1",null,ft,{hideColumn:r(n)}),w(ua,r(W).init),w(fa,r(W).min),w(qt,r(W).max),sa=pe(It,1,"svelte-l78rn1",null,sa,{hideColumn:r(n)}),w(x,r(W).step)}),C(Xe,it)}),t(Je),te(()=>{w(dt,r(j)+1),V(xe,"colspan",r(O)),w(Nt,r(k).sectionName),V(Ve,"colspan",r(X)),ta=pe(Je,1,"svelte-l78rn1",null,ta,{collaps:r(R)[r(k).sectionID]})}),Le(me,()=>r(R)[r(k).sectionID],Xe=>r(R)[r(k).sectionID]=Xe),C(h,M)}),t(st);var He=a(st,2),Dt=a(s(He),2);se(Dt),t(He);var nt=a(He,2);nt.__click=_;var Ht=a(nt,2);Ht.__click=J;var ot=a(Ht,2);ot.__click=()=>{g(p,!0)};var Jt=a(ot,2);Yt(Jt,{okName:"Done",okFunc:de,sizeLarge:!0,get modalOpen(){return r(u)},set modalOpen(h){g(u,h,!0)},children:(h,k)=>{var j=dl(),M=a(Se(j),2),ee=s(M,!0);t(M),te(()=>w(ee,r(z))),C(h,j)},$$slots:{default:!0}});var Qt=a(Jt,2);Yt(Qt,{okName:"Save into localStorage",okFunc:Y,get modalOpen(){return r(p)},set modalOpen(h){g(p,h,!0)},children:(h,k)=>{Zs(h,{get pageName(){return e.pDef.partName},get storeName(){return r(S)},set storeName(j){g(S,j,!0)}})},$$slots:{default:!0}}),t(Te);var $t=a(Te,2);Va($t,{get svgPath(){return r(f)},get modalOpen(){return r(q)},set modalOpen(h){g(q,h,!0)}});var Ye=a($t,2);Ye.__click=fe;var ct=s(Ye);t(Ye);var wt=a(Ye,2),Lt=s(wt);Ta(Lt,{get pFig(){return e.pFig},full:!0}),t(wt);var ea=a(wt,2),St=s(ea);Ta(St,{get pFig(){return e.pFig},full:!1}),t(ea),t(ye),te(()=>{ca(We,r(i)),Et=pe(We,1,"svelte-l78rn1",null,Et,{colorWarn:r(c)}),rt=pe(Gt,1,"svelte-l78rn1",null,rt,{hideColumn:r(n)}),pt=pe(Bt,1,"svelte-l78rn1",null,pt,{hideColumn:r(n)}),yt=pe(ia,1,"svelte-l78rn1",null,yt,{hideColumn:r(n)}),V(Dt,"size",r(Ae)),V(ct,"src",r(f)),V(ct,"alt",r(f))}),bt(Dt,()=>r(o),h=>g(o,h)),C(l,ye),ke()}Fe(["change","click"]);var ul=T('<nav class="svelte-9pq2jh"><button class="svelte-9pq2jh">0</button> <button class="svelte-9pq2jh">&lt-</button> <button class="svelte-9pq2jh">|&lt</button> <button class="svelte-9pq2jh">||</button> <button class="svelte-9pq2jh">&gt|</button> <button class="svelte-9pq2jh">-&gt</button> <input type="range" min="0" class="svelte-9pq2jh"/> <input type="number" min="0" class="svelte-9pq2jh"/></nav>');function fl(l,e){he(e,!0);let o=Ne(e,"tMax",3,10),n=Ne(e,"tStep",3,.1),i=Ne(e,"tUpdate",3,500),c=Ne(e,"simTime",15,0),v=null,d=0,u;const p=4;function m(){v!==null&&(clearInterval(v),v=null)}function S(){u<0&&c()<=0?c(o()):u>0&&c()>=o()?c(0):c(c()+u)}function z(){const J=i()/2**(Math.abs(d)-1);u=d<0?-n():n(),v=setInterval(S,J)}function y(){m(),c(0),d=0}function f(){m(),d=0,u=-n(),S()}function q(){m(),d=0,u=n(),S()}function R(){m(),d=Math.max(d-1,-p),z()}function Z(){m(),d=Math.min(d+1,p),z()}function A(){m(),d=0}Ds(()=>{m()});var Q=ul(),le=s(Q);le.__click=y;var oe=a(le,2);oe.__click=R;var ce=a(oe,2);ce.__click=f;var _=a(ce,2);_.__click=A;var U=a(_,2);U.__click=q;var E=a(U,2);E.__click=Z;var Y=a(E,2);se(Y);var $=a(Y,2);se($),t(Q),te(()=>{V(Y,"max",o()),V(Y,"step",n()),V($,"max",o()),V($,"step",n())}),bt(Y,c),bt($,c),C(l,Q),ke()}Fe(["click"]);var ml=T('<nav class="svelte-1o7asev"><button aria-labelledby="zoomInit" class="svelte-1o7asev"><div class="zero svelte-1o7asev"></div></button><button aria-labelledby="zoomIn" class="svelte-1o7asev"><div class="zoomin svelte-1o7asev"></div></button><button aria-labelledby="zoomOut" class="svelte-1o7asev"><div class="zoomout svelte-1o7asev"></div></button><button aria-labelledby="moveLeft" class="svelte-1o7asev"><div class="arrowleft svelte-1o7asev"></div></button><button aria-labelledby="moveRight" class="svelte-1o7asev"><div class="arrowright svelte-1o7asev"></div></button><button aria-labelledby="moveUp" class="svelte-1o7asev"><div class="arrowup svelte-1o7asev"></div></button><button aria-labelledby="moveDown" class="svelte-1o7asev"><div class="arrowdown svelte-1o7asev"></div></button></nav>');function _l(l,e){he(e,!0);var o=ml(),n=s(o);n.__click=()=>e.zoomClick("zoomInit");var i=a(n);i.__click=()=>e.zoomClick("zoomIn");var c=a(i);c.__click=()=>e.zoomClick("zoomOut");var v=a(c);v.__click=()=>e.zoomClick("moveLeft");var d=a(v);d.__click=()=>e.zoomClick("moveRight");var u=a(d);u.__click=()=>e.zoomClick("moveUp");var p=a(u);p.__click=()=>e.zoomClick("moveDown"),t(o),C(l,o),ke()}Fe(["click"]);var I=As(()=>D),bl=T('<div class="svelte-121ubpk"><label class="svelte-121ubpk"><input type="checkbox" class="svelte-121ubpk"/>main part</label> <label class="svelte-121ubpk"><input type="checkbox" class="svelte-121ubpk"/>main skeleton</label> <label class="svelte-121ubpk"><input type="checkbox" class="svelte-121ubpk"/>second parts</label> <label class="svelte-121ubpk"><input type="checkbox" class="svelte-121ubpk"/>second skeletons</label> <label class="svelte-121ubpk"><input type="checkbox" class="svelte-121ubpk"/>dynamics</label> <label class="svelte-121ubpk"><input type="checkbox" class="svelte-121ubpk"/>ruler</label> <label class="svelte-121ubpk"><input type="checkbox" class="svelte-121ubpk"/>frame of reference</label> <label class="svelte-121ubpk"><input type="checkbox" class="svelte-121ubpk"/>points</label> <label class="svelte-121ubpk"><input type="checkbox" class="svelte-121ubpk"/>lines</label> <label class="svelte-121ubpk"><input type="checkbox" class="svelte-121ubpk"/>vectors</label></div>');function hl(l,e){he(e,!1),Ls();var o=bl(),n=s(o),i=s(n);se(i),we(),t(n);var c=a(n,2),v=s(c);se(v),we(),t(c);var d=a(c,2),u=s(d);se(u),we(),t(d);var p=a(d,2),m=s(p);se(m),we(),t(p);var S=a(p,2),z=s(S);se(z),we(),t(S);var y=a(S,2),f=s(y);se(f),we(),t(y);var q=a(y,2),R=s(q);se(R),we(),t(q);var Z=a(q,2),A=s(Z);se(A),we(),t(Z);var Q=a(Z,2),le=s(Q);se(le),we(),t(Q);var oe=a(Q,2),ce=s(oe);se(ce),we(),t(oe),t(o),Le(i,()=>I().dLayers.main,_=>I(I().dLayers.main=_)),Le(v,()=>I().dLayers.mainB,_=>I(I().dLayers.mainB=_)),Le(u,()=>I().dLayers.second,_=>I(I().dLayers.second=_)),Le(m,()=>I().dLayers.secondB,_=>I(I().dLayers.secondB=_)),Le(z,()=>I().dLayers.dynamics,_=>I(I().dLayers.dynamics=_)),Le(f,()=>I().dLayers.ruler,_=>I(I().dLayers.ruler=_)),Le(R,()=>I().dLayers.refframe,_=>I(I().dLayers.refframe=_)),Le(A,()=>I().dLayers.points,_=>I(I().dLayers.points=_)),Le(le,()=>I().dLayers.lines,_=>I(I().dLayers.lines=_)),Le(ce,()=>I().dLayers.vectors,_=>I(I().dLayers.vectors=_)),C(l,o),ke()}var kl=T('<section class="svelte-vcjhlt"><!> <div class="rack svelte-vcjhlt"><canvas class="full svelte-vcjhlt"></canvas> <!></div> <div class="rack svelte-vcjhlt"><canvas class="zoom svelte-vcjhlt"></canvas> <!></div></section>');function gl(l,e){he(e,!0);let o=Ne(e,"simTime",15,0);const n=400,i=1200;let c=K(n),v,d,u;function p(b,N){if(v){const O=v.getContext("2d");O.clearRect(0,0,O.canvas.width,O.canvas.height);try{u=b.getAdjustFull(O.canvas.width,O.canvas.height),b.draw(O,u,N)}catch(X){console.log(X)}}}function m(b,N,O){if(d){const X=d.getContext("2d");X.clearRect(0,0,X.canvas.width,X.canvas.height);try{(N===void 0||N.init===0)&&(N=b.getAdjustZoom(X.canvas.width,X.canvas.height)),b.draw(X,N,O)}catch(Ae){console.log(Ae)}}}function S(){const b=v.getContext("2d"),N=d.getContext("2d"),O=Math.min(Math.max(.4*r(c),n),i);b.canvas.width=O,b.canvas.height=O,N.canvas.width=O,N.canvas.height=O,D.canvasZWidth=O,D.zAdjust.init===0&&(D.zAdjust=e.pFig.getAdjustZoom(N.canvas.width,N.canvas.height))}function z(){S(),p(e.pFig,D.dLayers),m(e.pFig,D.zAdjust,D.dLayers)}function y(b,N,O){p(b,O),m(b,N,O)}ws(()=>{S()}),ya(()=>{y(e.pFig,D.zAdjust,D.dLayers)});function f(b){const N=d.getContext("2d");switch(b){case"zoomInit":D.zAdjust=e.pFig.getAdjustZoom(N.canvas.width,N.canvas.height);break;case"zoomIn":D.zAdjust=na(.7,D.zAdjust);break;case"zoomOut":D.zAdjust=na(1.3,D.zAdjust);break;case"moveLeft":D.zAdjust.xMin+=-.2*D.zAdjust.xyDiff;break;case"moveRight":D.zAdjust.xMin+=.2*D.zAdjust.xyDiff;break;case"moveUp":D.zAdjust.yMin+=.2*D.zAdjust.xyDiff;break;case"moveDown":D.zAdjust.yMin+=-.2*D.zAdjust.xyDiff;break;default:console.log(`ERR423: ${b} has no case!`)}m(e.pFig,D.zAdjust,D.dLayers)}const q=3e3,R=10,Z=3;let A={timestamp:0,offsetX:0,offsetY:0};function Q(b){b.button===0&&(A.timestamp=Date.now(),A.offsetX=b.offsetX,A.offsetY=b.offsetY)}function le(b){if(b.button===0)if(Date.now()-A.timestamp<q){const N=Math.abs(A.offsetX-b.offsetX),O=Math.abs(A.offsetY-b.offsetY);if(N<R&&O<R){const[X,Ae]=$e(b.offsetX,b.offsetY,u);D.zAdjust=vs(X,Ae,D.zAdjust),y(e.pFig,D.zAdjust,D.dLayers)}if(N>R&&O>R){const X=N/O,Ae=1/X;if(X<Z&&Ae<Z){const[ye,Te]=$e(b.offsetX,b.offsetY,u),[qe,Ie]=$e(A.offsetX,A.offsetY,u),Ce=d.getContext("2d").canvas.width;D.zAdjust=us(ye,Te,qe,Ie,Ce,Ce),y(e.pFig,D.zAdjust,D.dLayers)}}}else console.log(`Warn205: ignore ${b.offsetX} ${b.offsetY} because too slow`)}function oe(b){if(v){const N=v.getContext("2d");if(b.buttons===1){const O=b.offsetX-A.offsetX,X=b.offsetY-A.offsetY;p(e.pFig,D.dLayers),N.beginPath(),N.rect(A.offsetX,A.offsetY,O,X),N.strokeStyle=ma.mouse,N.stroke()}if(D.dLayers.ruler){const[O,X]=$e(b.offsetX,b.offsetY,u);N.clearRect(5,5,200,25),N.font="15px Arial",N.fillStyle=ma.ruler,N.fillText(`x: ${O.toFixed(4)} y: ${X.toFixed(4)}`,5,20)}}}let ce,_,U;function E(b){if(b.button===0){const[N,O]=$e(b.offsetX,b.offsetY,D.zAdjust);ce=N,_=O,U=fs(D.zAdjust)}}function Y(b){if(b.buttons===1){const[N,O]=$e(b.offsetX,b.offsetY,U);D.zAdjust=ms(ce,_,N,O,U),m(e.pFig,D.zAdjust,D.dLayers)}else if(D.dLayers.ruler&&d){const N=d.getContext("2d"),[O,X]=$e(b.offsetX,b.offsetY,D.zAdjust);N.clearRect(5,5,200,25),N.font="15px Arial",N.fillStyle=ma.ruler,N.fillText(`x: ${O.toFixed(4)} y: ${X.toFixed(4)}`,5,20)}}function $(b){b.preventDefault(),b.deltaY>0?D.zAdjust=na(.7,D.zAdjust):D.zAdjust=na(1.3,D.zAdjust),m(e.pFig,D.zAdjust,D.dLayers)}var J=kl();ja("resize",ns,z);var de=s(J);hl(de,{});var ae=a(de,2),G=s(ae);V(G,"width",n),V(G,"height",n),G.__mousedown=Q,G.__mouseup=le,G.__mousemove=oe,da(G,b=>v=b,()=>v);var fe=a(G,2);fl(fe,{get tMax(){return e.pDefSim.tMax},get tStep(){return e.pDefSim.tStep},get tUpdate(){return e.pDefSim.tUpdate},get simTime(){return o()},set simTime(b){o(b)}}),t(ae);var re=a(ae,2),ie=s(re);V(ie,"width",n),V(ie,"height",n),ie.__mousedown=E,ie.__mousemove=Y,da(ie,b=>d=b,()=>d);var Me=a(ie,2);_l(Me,{zoomClick:f}),t(re),t(J),zs("innerWidth",b=>g(c,b,!0)),ja("wheel",ie,$),C(l,J),ke()}Fe(["mousedown","mouseup","mousemove"]);var pl=T("<tr><td> </td><td> </td><td> </td><td><i> </i></td><td><i> </i></td></tr>"),yl=T('<li class="svelte-18prq6b"><input type="checkbox" class="toggle svelte-18prq6b"/> <label class="label svelte-18prq6b"><div class="arrow svelte-18prq6b"></div> </label> <button class="svelte-18prq6b"> </button> <button class="svelte-18prq6b">Export parameters</button> <div class="nested svelte-18prq6b"><article class="svelte-18prq6b"> <strong> </strong> </article> <table class="svelte-18prq6b"><thead class="svelte-18prq6b"><tr><td>Num</td><td>Name</td><td>Value</td><td>Init</td><td>Set?</td></tr></thead><tbody class="svelte-18prq6b"></tbody></table></div></li>'),xl=T('<section class="svelte-18prq6b"><h2 class="svelte-18prq6b">Sub-designs <span class="svelte-18prq6b"> </span></h2> <ol class="svelte-18prq6b"></ol></section>');function Dl(l,e){he(e,!0);const o=ge(()=>Object.keys(e.subD));async function n(y){const f=e.subD[y];Ya(f.partName,Aa(f.dparam),!0);const q=bs(`/${e.pLink[f.partName]}`);Ha(q)}function i(y){const f=e.subD[y].partName,q=e.subD[y].dparam,R=`sub-design parameters of ${f} from ${e.origPartName}`;Da(f,Aa(q),R)}function c(y){let f="[ ";return f+=`${_t(_a(y[0]))}, `,f+=`${_t(_a(y[1]))}, `,f+=`${_t(_a(y[2]))} ]`,f}function v(y){let f="[ ";return f+=`${_t(y[0])}, `,f+=`${_t(y[1])}, `,f+=`${_t(y[2])} ]`,f}function d(y){return y?"Yes":""}var u=xl(),p=s(u),m=a(s(p)),S=s(m);t(m),t(p);var z=a(p,2);ze(z,20,()=>r(o),y=>y,(y,f)=>{var q=yl(),R=s(q);se(R),_s(R,!1);var Z=a(R,2),A=a(s(Z));t(Z);var Q=a(Z,2);Q.__click=()=>n(f);var le=s(Q);t(Q);var oe=a(Q,2);oe.__click=()=>i(f);var ce=a(oe,2),_=s(ce),U=s(_),E=a(U),Y=s(E,!0);t(E);var $=a(E);t(_);var J=a(_,2),de=a(s(J));ze(de,22,()=>Object.keys(e.subD[f].dparam),ae=>ae,(ae,G,fe)=>{var re=pl();let ie;var Me=s(re),b=s(Me,!0);t(Me);var N=a(Me),O=s(N,!0);t(N);var X=a(N),Ae=s(X,!0);t(X);var ye=a(X),Te=s(ye),qe=s(Te,!0);t(Te),t(ye);var Ie=a(ye),Re=s(Ie),Ce=s(Re,!0);t(Re),t(Ie),t(re),te(at=>{ie=pe(re,1,"svelte-18prq6b",null,ie,{changed:e.subD[f].dparam[G].chg}),w(b,r(fe)+1),w(O,G),w(Ae,e.subD[f].dparam[G].val),w(qe,e.subD[f].dparam[G].init),w(Ce,at)},[()=>d(e.subD[f].dparam[G].chg)]),C(ae,re)}),t(de),t(J),t(ce),t(q),te((ae,G,fe)=>{V(R,"id",`cb_${f??""}`),V(Z,"for",`cb_${f??""}`),w(A,` ${f??""}`),w(le,`Go to ${e.pLink[e.subD[f].partName]??""}`),w(U,`${ae??""} parameters of `),w(Y,e.subD[f].partName),w($,` with orientation ${G??""} (degree) at position
						${fe??""} (mm)`)},[()=>Object.keys(e.subD[f].dparam).length,()=>c(e.subD[f].orientation),()=>v(e.subD[f].position)]),C(y,q)}),t(z),t(u),te(()=>w(S,`(Number of sub-instances: ${r(o).length??""})`)),C(l,u),ke()}Fe(["click"]);var wl=T("<button> </button>"),Ll=T('<tr class="svelte-1kddkhe"><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe">2d- svg</td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">preview</button></td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">download</button></td></tr>'),Sl=T('<tr class="svelte-1kddkhe"><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe">2d- dxf</td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">preview</button></td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">download</button></td></tr>'),Nl=T('<!> <section class="svelte-1kddkhe"><h2 class="svelte-1kddkhe">Log</h2> <textarea rows="5" cols="94" readonly="" wrap="soft"></textarea></section> <section class="svelte-1kddkhe"><h2 class="svelte-1kddkhe">2D Drawings : <!> <button>All faces merged</button></h2></section> <!> <section class="svelte-1kddkhe"><h2 class="svelte-1kddkhe">Export</h2> <table class="svelte-1kddkhe"><caption class="svelte-1kddkhe">Output files</caption><thead class="svelte-1kddkhe"><tr class="svelte-1kddkhe"><th class="svelte-1kddkhe">#</th><th class="svelte-1kddkhe">Filename</th><th class="svelte-1kddkhe">Type</th><th class="svelte-1kddkhe">Preview</th><th class="svelte-1kddkhe">Download</th></tr></thead><tbody class="svelte-1kddkhe"><tr class="svelte-1kddkhe"><td class="svelte-1kddkhe">1</td><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe">0-params- pxJson</td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">preview</button></td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">download</button></td></tr><tr class="svelte-1kddkhe"><td class="svelte-1kddkhe">2</td><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe">1-log- txtLog</td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">preview</button></td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">download</button></td></tr><!><tr class="svelte-1kddkhe"><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe">2d- svg</td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">preview</button></td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">download</button></td></tr><!><tr class="svelte-1kddkhe"><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe">2d- dxf</td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">preview</button></td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">download</button></td></tr><tr class="svelte-1kddkhe"><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe">4-pax- paxJson</td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">preview</button></td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">download</button></td></tr><tr class="svelte-1kddkhe"><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe">5-script- scad</td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">preview</button></td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">download</button></td></tr><tr class="svelte-1kddkhe"><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe">5-script- jsCad</td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">preview</button></td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">download</button></td></tr><tr class="svelte-1kddkhe"><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe">5-script- pyFreecad</td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">preview</button></td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">download</button></td></tr><tr class="svelte-1kddkhe"><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe"> </td><td class="svelte-1kddkhe">6-zip- zip</td><td class="svelte-1kddkhe"></td><td class="svelte-1kddkhe"><button class="svelte-1kddkhe">download</button></td></tr></tbody></table> <dialog id="dBview" class="svelte-1kddkhe"><textarea readonly="" wrap="soft" class="svelte-1kddkhe"></textarea> <button class="bback svelte-1kddkhe">close - back - escape</button></dialog> <!></section>',1);function jl(l,e){he(e,!0);const o="ParametrixAll";function n(x){let P=!0;const F=/warn/i;return x.search(F)<0&&(P=!1),P}function i(x,P){let F=P;if(x.length===0)console.log("warn404: Drawing has an empty face list");else{const L=x.slice();L.push(o),L.includes(F)||(F=x[0])}return F}function c(x,P){let F;const L=Object.keys(x),B=i(L,P);return L.includes(B)?F=x[B]:F=ps(x),F}let v=K(0),d=K(o);Ra(()=>{g(d,i(Object.keys(e.fgeom(0,H[e.pDef.partName]).fig),""),!0)});let u=ge(()=>e.fgeom(r(v),H[e.pDef.partName])),p=ge(()=>{const x=new Date().toLocaleTimeString();let P=`Geometry ${e.pDef.partName} computed at ${x}
`;return P+=r(u).logstr,P}),m=ge(()=>Object.keys(r(u).fig)),S=ge(()=>r(u).calcErr),z=ge(()=>n(r(u).logstr)),y=ge(()=>c(r(u).fig,r(d))),f=ge(()=>r(u).sub);function q(x,P){const F=document.createElement("a"),L=URL.createObjectURL(P);F.setAttribute("href",L),F.setAttribute("download",x),F.click(),F.remove(),URL.revokeObjectURL(L)}function R(x,P,F){const L=document.createElement("a"),B="data:"+F+";utf-8,"+encodeURIComponent(P);L.setAttribute("href",B),L.setAttribute("download",x),L.click(),L.remove()}function Z(){const x=/[-:]/g,P=/\..*$/;return new Date().toISOString().replace(x,"").replace(P,"").replace("T","_")}async function A(x){const P=/^svg_/,F=/^dxf_/;let L=ne.eSVG,B="all";x.match(P)?(L=ne.eSVG,B=x.replace(P,"")):x.match(F)?(L=ne.eDXF,B=x.replace(F,"")):x==="allsvg"?L=ne.eSVGALL:x==="alldxf"?L=ne.eDXFALL:x==="compute_log"?L=ne.eTXTLOG:x==="pax"?L=ne.ePAX:x==="oscad"?L=ne.eOPENSCAD:x==="ojscad"?L=ne.eJSCAD:x==="freecad"?L=ne.eFREECAD:x==="zip"?L=ne.eZIP:console.log(`err883: downloadExport iExportFace ${x} invalid`);const Oe=ks(L),_e=ys(L),De=gs(L),ue=e.pDef.partName+"_"+B+"_"+Z()+Oe;if(De){const Pe=await hs(e.fgeom,r(v),H[e.pDef.partName],e.pDef,L);q(ue,Pe)}else{const Pe=Ca(e.fgeom,H[e.pDef.partName],e.pDef,B,L);R(ue,Pe,_e)}}async function Q(){Da(e.pDef.partName,H[e.pDef.partName],"")}let le,oe=K("");function ce(x){g(oe,x,!0),le.showModal()}function _(x,P){ce(Ca(e.fgeom,H[e.pDef.partName],e.pDef,x,P))}function U(){le.close()}var E=Nl(),Y=Se(E);vl(Y,{get pDef(){return e.pDef},get pFig(){return r(y)}});var $=a(Y,2),J=a(s($),2);ka(J);let de;t($);var ae=a($,2),G=s(ae),fe=a(s(G));ze(fe,16,()=>r(m),x=>x,(x,P)=>{var F=wl();F.__click=()=>{g(d,P,!0)};var L=s(F,!0);t(F),te(()=>{pe(F,1,Pa({theFace:r(d)===P}),"svelte-1kddkhe"),w(L,P)}),C(x,F)});var re=a(fe,2);re.__click=()=>{g(d,o)},t(G),t(ae);var ie=a(ae,2);gl(ie,{get pDefSim(){return e.pDef.sim},get pFig(){return r(y)},get simTime(){return r(v)},set simTime(x){g(v,x,!0)}});var Me=a(ie,2),b=a(s(Me),2),N=a(s(b),2),O=s(N),X=a(s(O)),Ae=s(X);t(X);var ye=a(X,2),Te=s(ye);Te.__click=()=>{ce(Hs(e.pDef.partName,H[e.pDef.partName],""))},t(ye);var qe=a(ye),Ie=s(qe);Ie.__click=Q,t(qe),t(O);var Re=a(O),Ce=a(s(Re)),at=s(Ce);t(Ce);var We=a(Ce,2),Et=s(We);Et.__click=()=>{_("all",ne.eTXTLOG)},t(We);var st=a(We),ht=s(st);ht.__click=async()=>{await A("compute_log")},t(st),t(Re);var kt=a(Re);ze(kt,18,()=>r(m),x=>x,(x,P,F)=>{var L=Ll(),B=s(L),Oe=s(B,!0);t(B);var _e=a(B),De=s(_e);t(_e);var ue=a(_e,2),Pe=s(ue);Pe.__click=()=>{_(P,ne.eSVG)},t(ue);var Ue=a(ue),be=s(Ue);be.__click=async()=>{await A(`svg_${P}`)},t(Ue),t(L),te(()=>{w(Oe,3+r(F)),w(De,`${e.pDef.partName??""}_${P??""}.svg`)}),C(x,L)});var Be=a(kt),lt=s(Be),Kt=s(lt,!0);t(lt);var gt=a(lt),Gt=s(gt);t(gt);var rt=a(gt,2),Bt=s(rt);Bt.__click=()=>{_("all",ne.eSVGALL)},t(rt);var pt=a(rt),ia=s(pt);ia.__click=async()=>{await A("allsvg")},t(pt),t(Be);var yt=a(Be);ze(yt,18,()=>r(m),x=>x,(x,P,F)=>{var L=Sl(),B=s(L),Oe=s(B,!0);t(B);var _e=a(B),De=s(_e);t(_e);var ue=a(_e,2),Pe=s(ue);Pe.__click=()=>{_(P,ne.eDXF)},t(ue);var Ue=a(ue),be=s(Ue);be.__click=async()=>{await A(`dxf_${P}`)},t(Ue),t(L),te(()=>{w(Oe,4+r(m).length+r(F)),w(De,`${e.pDef.partName??""}_${P??""}.dxf`)}),C(x,L)});var xt=a(yt),He=s(xt),Dt=s(He,!0);t(He);var nt=a(He),Ht=s(nt);t(nt);var ot=a(nt,2),Jt=s(ot);Jt.__click=()=>{_("all",ne.eDXFALL)},t(ot);var Qt=a(ot),$t=s(Qt);$t.__click=async()=>{await A("alldxf")},t(Qt),t(xt);var Ye=a(xt),ct=s(Ye),wt=s(ct,!0);t(ct);var Lt=a(ct),ea=s(Lt);t(Lt);var St=a(Lt,2),h=s(St);h.__click=()=>{_("all",ne.ePAX)},t(St);var k=a(St),j=s(k);j.__click=async()=>{await A("pax")},t(k),t(Ye);var M=a(Ye),ee=s(M),ve=s(ee,!0);t(ee);var je=a(ee),dt=s(je);t(je);var xe=a(je,2),Nt=s(xe);Nt.__click=()=>{_("all",ne.eOPENSCAD)},t(xe);var Ve=a(xe),jt=s(Ve);jt.__click=async()=>{await A("oscad")},t(Ve),t(M);var me=a(M),Je=s(me),ta=s(Je,!0);t(Je);var Xe=a(Je),W=s(Xe);t(Xe);var zt=a(Xe,2),it=s(zt);it.__click=()=>{_("all",ne.eJSCAD)},t(zt);var At=a(zt),Ct=s(At);Ct.__click=async()=>{await A("ojscad")},t(At),t(me);var Ot=a(me),Qe=s(Ot),Pt=s(Qe,!0);t(Qe);var Ft=a(Qe),Mt=s(Ft);t(Ft);var Tt=a(Ft,2),va=s(Tt);va.__click=()=>{_("all",ne.eFREECAD)},t(Tt);var aa=a(Tt),vt=s(aa);vt.__click=async()=>{await A("freecad")},t(aa),t(Ot);var Rt=a(Ot),Ut=s(Rt),ut=s(Ut,!0);t(Ut);var ft=a(Ut),ua=s(ft);t(ft);var mt=a(ft,3),fa=s(mt);fa.__click=async()=>{await A("zip")},t(mt),t(Rt),t(N),t(b);var Ze=a(b,2),qt=s(Ze);ka(qt);var It=a(qt,2);It.__click=U,t(Ze),da(Ze,x=>le=x,()=>le);var sa=a(Ze,2);Dl(sa,{get subD(){return r(f)},get origPartName(){return e.pDef.partName},get pLink(){return e.pLink}}),t(Me),te(()=>{ca(J,r(p)),de=pe(J,1,"svelte-1kddkhe",null,de,{colorErr:r(S),colorWarn:r(z)}),pe(re,1,Pa({theFace:r(d)===o}),"svelte-1kddkhe"),w(Ae,`px_${e.pDef.partName??""}.json`),w(at,`${e.pDef.partName??""}_all.log`),w(Kt,3+r(m).length),w(Gt,`${e.pDef.partName??""}_all.svg`),w(Dt,4+2*r(m).length),w(Ht,`${e.pDef.partName??""}_all.dxf`),w(wt,5+2*r(m).length),w(ea,`${e.pDef.partName??""}_all.pax.json`),w(ve,6+2*r(m).length),w(dt,`${e.pDef.partName??""}_all_noarc_openscad.scad`),w(ta,7+2*r(m).length),w(W,`${e.pDef.partName??""}_all_noarc_jscad.js`),w(Pt,8+2*r(m).length),w(Mt,`${e.pDef.partName??""}_all_freecad.py`),w(ut,9+2*r(m).length),w(ua,`${e.pDef.partName??""}_all.zip`),ca(qt,r(oe))}),C(l,E),ke()}Fe(["click"]);var zl=T('<h1 class="svelte-yjsxst"> </h1> <article class="svelte-yjsxst"> </article> <!> <!>',1);function Al(l,e){he(e,!0),Ps(e.pageDef);var o=zl(),n=Se(o),i=s(n,!0);t(n);var c=a(n,2),v=s(c);t(c);var d=a(c,2);Rs(d,{get pDef(){return e.pageDef.pDef}});var u=a(d,2);jl(u,{get pDef(){return e.pageDef.pDef},get fgeom(){return e.pageDef.pGeom},get pLink(){return e.pLink}}),te(()=>{w(i,e.pageDef.pTitle),w(v,`[${e.pageDef.pDef.partName??""}]: ${e.pageDef.pDescription??""}`)}),C(l,o),ke()}function Wl(l,e){he(e,!0),Al(l,{get pageDef(){return e.data.pageDef},get pLink(){return e.data.allLink}}),ke()}export{Wl as component,Xl as universal};
